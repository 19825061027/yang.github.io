#+INCLUDE: "../../prefix.org"

#+TITLE: C语言别名 & 数组指针降级 & 宏#和##              

* 数组指针降级
int qwe[] = {
1,2,3,4
};

ARRAY_SIZE(qwe) == 4;

当qwe作为函数参数传递时，qwe将会变成普通指针，也就是无法再通过ARRAY_SIZE求解。
因为当qwe变为普通指针时，sizeof(qwe_arg) 只是指针大小，而非数组大小.

* C语言别名
int qwe[] = {
1,2,3,4
};

extern int qwe_alias[] __attribute__((__alias__("qwe")));
但别名之后，数组指针也会降级！！！！！

* 宏#和##
一个#代表字符串
两个##代表C变量名或函数名拼接

将宏作为参数传递时，只会展开宏函数，不会展开宏参数
#define ONE 1
#define TEST_MACRO(num) int name_##num

TEST_MACRO(ONE);
==
int name_ONE;

想要等到name_1:
#define _TEST_MACRO(num) int name_##num
#define TEST_MACRO(num) _TEST_MACRO(num)
需要中转一下，做一步宏展开
