#+INCLUDE: "../../prefix.org"

#+TITLE: wsl2上emacs卡在starting emacs daemon      

debug源码也看不出来啥，就看出来是问题出在waitpid（）上。
尝试不同权限，总是只是打开一个，在root打开之后，normal users报错
mnt/wslg/runtime-dir/emacs/没权限，就知道为啥了。

虽然不知道这个目录存在的意义，可以参照 https://zhuanlan.zhihu.com/p/691590843
反正就是每一个冲突了。
然后将root和普通用户的设置这个目录的环境变量XDG_RUNTIME_DIR分别指向其他地方就行了。
#+begin_src shell
  rd=/tmp/${USER}_runtime_dir
  mkdir -p $rd
  export XDG_RUNTIME_DIR=$rd
#+end_src