#+INCLUDE: "../../prefix.org"

#+TITLE: device IO mapping操作

1. CPU地址空间部分解释为内存，部分解释为设备。
2. 任何地址都不应该直接使用，需要调用ioremap()获取访问权限。
3. 访问设备的接口需要保证nocache，index-order，支持接口：
   readb(), readw(), readl(), readq(), readb_relaxed(),
   readw_relaxed(), readl_relaxed(), readq_relaxed(),
   writeb(), writew(), writel() and writeq().
4. 如果设备想要一次访问 > 8bytes 的地址空间，对于这些设备，采用如下函数：
   memcpy_toio(), memcpy_fromio(), memset_io()。不能使用memset或memcpy，
   因为他们不保证顺序。
5. 编译器针对I/O支持强有序的读写功能，如果想要允许乱序以优化性能，可采用
   __readb()，小心使用。
